{% doc %}
  @prompt
    I need a section for our store locations ; 
    it will be a grid of locations , i can control how many grid items i can view in desktop and mobile , 
    for each item it will contain  title , describtion and a phone number , and ifram google map for the location , the item can contain all these data or one of them - it is flexable 
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-store-locations-{{ ai_gen_id }} {
    padding: 40px 20px;
    background-color: {{ block.settings.background_color }};
  }

  .ai-store-locations__container-{{ ai_gen_id }} {
    max-width: {{ block.settings.max_width }}px;
    margin: 0 auto;
  }

  .ai-store-locations__header-{{ ai_gen_id }} {
    text-align: center;
    margin-bottom: 40px;
  }

  .ai-store-locations__title-{{ ai_gen_id }} {
    font-size: {{ block.settings.title_size }}px;
    color: {{ block.settings.title_color }};
    margin: 0 0 16px;
  }

  .ai-store-locations__description-{{ ai_gen_id }} {
    font-size: {{ block.settings.description_size }}px;
    color: {{ block.settings.description_color }};
    margin: 0;
  }

  .ai-store-locations__grid-{{ ai_gen_id }} {
    display: grid;
    grid-template-columns: repeat({{ block.settings.columns_desktop }}, 1fr);
    gap: {{ block.settings.grid_gap }}px;
  }

  .ai-store-location-card-{{ ai_gen_id }} {
    background-color: {{ block.settings.card_background_color }};
    border-radius: {{ block.settings.card_border_radius }}px;
    padding: {{ block.settings.card_padding }}px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, {{ block.settings.card_shadow_opacity | divided_by: 100.0 }});
    display: flex;
    flex-direction: column;
    gap: 16px;
  }

  .ai-store-location-card__title-{{ ai_gen_id }} {
    font-size: {{ block.settings.card_title_size }}px;
    color: {{ block.settings.card_title_color }};
    margin: 0;
    font-weight: 600;
  }

  .ai-store-location-card__description-{{ ai_gen_id }} {
    font-size: {{ block.settings.card_text_size }}px;
    color: {{ block.settings.card_text_color }};
    margin: 0;
    line-height: 1.5;
  }

  .ai-store-location-card__phone-{{ ai_gen_id }} {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: {{ block.settings.card_text_size }}px;
    color: {{ block.settings.card_text_color }};
    text-decoration: none;
  }

  .ai-store-location-card__phone-{{ ai_gen_id }}:hover {
    color: {{ block.settings.phone_hover_color }};
  }

  .ai-store-location-card__phone-icon-{{ ai_gen_id }} {
    width: 20px;
    height: 20px;
    flex-shrink: 0;
  }

  .ai-store-location-card__map-{{ ai_gen_id }} {
    width: 100%;
    height: {{ block.settings.map_height }}px;
    border: none;
    border-radius: {{ block.settings.map_border_radius }}px;
    overflow: hidden;
  }

  .ai-store-location-card__empty-{{ ai_gen_id }} {
    text-align: center;
    padding: 40px 20px;
    color: #999;
    font-style: italic;
  }

  @media screen and (max-width: 749px) {
    .ai-store-locations__grid-{{ ai_gen_id }} {
      grid-template-columns: repeat({{ block.settings.columns_mobile }}, 1fr);
    }

    .ai-store-locations__title-{{ ai_gen_id }} {
      font-size: calc({{ block.settings.title_size }}px * 0.8);
    }

    .ai-store-location-card__map-{{ ai_gen_id }} {
      height: {{ block.settings.map_height | times: 0.8 }}px;
    }
  }
{% endstyle %}

<div class="ai-store-locations-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  <div class="ai-store-locations__container-{{ ai_gen_id }}">
    {% if block.settings.section_title != blank or block.settings.section_description != blank %}
      <div class="ai-store-locations__header-{{ ai_gen_id }}">
        {% if block.settings.section_title != blank %}
          <h2 class="ai-store-locations__title-{{ ai_gen_id }}">{{ block.settings.section_title }}</h2>
        {% endif %}
        {% if block.settings.section_description != blank %}
          <div class="ai-store-locations__description-{{ ai_gen_id }}">{{ block.settings.section_description }}</div>
        {% endif %}
      </div>
    {% endif %}

    <div class="ai-store-locations__grid-{{ ai_gen_id }}">
      {% for i in (1..12) %}
        {% liquid
          assign location_enabled_key = 'location_' | append: i | append: '_enabled'
          assign location_title_key = 'location_' | append: i | append: '_title'
          assign location_description_key = 'location_' | append: i | append: '_description'
          assign location_phone_key = 'location_' | append: i | append: '_phone'
          assign location_map_key = 'location_' | append: i | append: '_map_embed'

          assign location_enabled = block.settings[location_enabled_key]
          assign location_title = block.settings[location_title_key]
          assign location_description = block.settings[location_description_key]
          assign location_phone = block.settings[location_phone_key]
          assign location_map = block.settings[location_map_key]
        %}

        {% if location_enabled %}
          <div class="ai-store-location-card-{{ ai_gen_id }}">
            {% if location_title != blank %}
              <h3 class="ai-store-location-card__title-{{ ai_gen_id }}">{{ location_title }}</h3>
            {% endif %}

            {% if location_description != blank %}
              <div class="ai-store-location-card__description-{{ ai_gen_id }}">{{ location_description }}</div>
            {% endif %}

            {% if location_phone != blank %}
              <a href="tel:{{ location_phone }}" class="ai-store-location-card__phone-{{ ai_gen_id }}">
                <svg class="ai-store-location-card__phone-icon-{{ ai_gen_id }}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                </svg>
                {{ location_phone }}
              </a>
            {% endif %}

            {% if location_map != blank %}
              <div class="ai-store-location-card__map-{{ ai_gen_id }}">
                {{ location_map }}
              </div>
            {% endif %}

            {% if location_title == blank and location_description == blank and location_phone == blank and location_map == blank %}
              <div class="ai-store-location-card__empty-{{ ai_gen_id }}">
                Add location details in the block settings
              </div>
            {% endif %}
          </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Store locations",
  "tag": null,
  "settings": [
    {
      "type": "header",
      "content": "Section header"
    },
    {
      "type": "text",
      "id": "section_title",
      "label": "Title",
      "default": "Our Store Locations"
    },
    {
      "type": "textarea",
      "id": "section_description",
      "label": "Description",
      "default": "Visit us at any of our convenient locations"
    },
    {
      "type": "range",
      "id": "title_size",
      "min": 16,
      "max": 60,
      "step": 2,
      "unit": "px",
      "label": "Title size",
      "default": 32
    },
    {
      "type": "range",
      "id": "description_size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Description size",
      "default": 16
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title color",
      "default": "#121212"
    },
    {
      "type": "color",
      "id": "description_color",
      "label": "Description color",
      "default": "#121212"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "Grid layout"
    },
    {
      "type": "range",
      "id": "columns_desktop",
      "min": 1,
      "max": 4,
      "step": 1,
      "label": "Columns on desktop",
      "default": 3
    },
    {
      "type": "select",
      "id": "columns_mobile",
      "label": "Columns on mobile",
      "options": [
        {
          "value": "1",
          "label": "1"
        },
        {
          "value": "2",
          "label": "2"
        }
      ],
      "default": "1"
    },
    {
      "type": "range",
      "id": "grid_gap",
      "min": 8,
      "max": 40,
      "step": 4,
      "unit": "px",
      "label": "Grid gap",
      "default": 24
    },
    {
      "type": "range",
      "id": "max_width",
      "min": 800,
      "max": 1600,
      "step": 100,
      "unit": "px",
      "label": "Maximum width",
      "default": 1200
    },
    {
      "type": "header",
      "content": "Card style"
    },
    {
      "type": "color",
      "id": "card_background_color",
      "label": "Card background",
      "default": "#f3f3f3"
    },
    {
      "type": "range",
      "id": "card_border_radius",
      "min": 0,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Card border radius",
      "default": 8
    },
    {
      "type": "range",
      "id": "card_padding",
      "min": 12,
      "max": 40,
      "step": 4,
      "unit": "px",
      "label": "Card padding",
      "default": 24
    },
    {
      "type": "range",
      "id": "card_shadow_opacity",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "%",
      "label": "Card shadow opacity",
      "default": 10
    },
    {
      "type": "range",
      "id": "card_title_size",
      "min": 14,
      "max": 32,
      "step": 2,
      "unit": "px",
      "label": "Card title size",
      "default": 20
    },
    {
      "type": "range",
      "id": "card_text_size",
      "min": 12,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Card text size",
      "default": 14
    },
    {
      "type": "color",
      "id": "card_title_color",
      "label": "Card title color",
      "default": "#121212"
    },
    {
      "type": "color",
      "id": "card_text_color",
      "label": "Card text color",
      "default": "#121212"
    },
    {
      "type": "color",
      "id": "phone_hover_color",
      "label": "Phone hover color",
      "default": "#334fb4"
    },
    {
      "type": "header",
      "content": "Map style"
    },
    {
      "type": "range",
      "id": "map_height",
      "min": 150,
      "max": 400,
      "step": 10,
      "unit": "px",
      "label": "Map height",
      "default": 250
    },
    {
      "type": "range",
      "id": "map_border_radius",
      "min": 0,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "Map border radius",
      "default": 4
    },
    {
      "type": "header",
      "content": "Location 1"
    },
    {
      "type": "checkbox",
      "id": "location_1_enabled",
      "label": "Enable location 1",
      "default": true
    },
    {
      "type": "text",
      "id": "location_1_title",
      "label": "Title",
      "default": "Downtown Store"
    },
    {
      "type": "textarea",
      "id": "location_1_description",
      "label": "Description",
      "default": "123 Main Street, City, State 12345"
    },
    {
      "type": "text",
      "id": "location_1_phone",
      "label": "Phone number",
      "default": "+1 (555) 123-4567"
    },
    {
      "type": "html",
      "id": "location_1_map_embed",
      "label": "Google Maps embed code"
    },
    {
      "type": "header",
      "content": "Location 2"
    },
    {
      "type": "checkbox",
      "id": "location_2_enabled",
      "label": "Enable location 2",
      "default": true
    },
    {
      "type": "text",
      "id": "location_2_title",
      "label": "Title",
      "default": "Uptown Store"
    },
    {
      "type": "textarea",
      "id": "location_2_description",
      "label": "Description",
      "default": "456 Oak Avenue, City, State 12345"
    },
    {
      "type": "text",
      "id": "location_2_phone",
      "label": "Phone number",
      "default": "+1 (555) 987-6543"
    },
    {
      "type": "html",
      "id": "location_2_map_embed",
      "label": "Google Maps embed code"
    },
    {
      "type": "header",
      "content": "Location 3"
    },
    {
      "type": "checkbox",
      "id": "location_3_enabled",
      "label": "Enable location 3",
      "default": true
    },
    {
      "type": "text",
      "id": "location_3_title",
      "label": "Title",
      "default": "Westside Store"
    },
    {
      "type": "textarea",
      "id": "location_3_description",
      "label": "Description",
      "default": "789 Elm Street, City, State 12345"
    },
    {
      "type": "text",
      "id": "location_3_phone",
      "label": "Phone number",
      "default": "+1 (555) 456-7890"
    },
    {
      "type": "html",
      "id": "location_3_map_embed",
      "label": "Google Maps embed code"
    },
    {
      "type": "header",
      "content": "Location 4"
    },
    {
      "type": "checkbox",
      "id": "location_4_enabled",
      "label": "Enable location 4",
      "default": false
    },
    {
      "type": "text",
      "id": "location_4_title",
      "label": "Title"
    },
    {
      "type": "textarea",
      "id": "location_4_description",
      "label": "Description"
    },
    {
      "type": "text",
      "id": "location_4_phone",
      "label": "Phone number"
    },
    {
      "type": "html",
      "id": "location_4_map_embed",
      "label": "Google Maps embed code"
    },
    {
      "type": "header",
      "content": "Location 5"
    },
    {
      "type": "checkbox",
      "id": "location_5_enabled",
      "label": "Enable location 5",
      "default": false
    },
    {
      "type": "text",
      "id": "location_5_title",
      "label": "Title"
    },
    {
      "type": "textarea",
      "id": "location_5_description",
      "label": "Description"
    },
    {
      "type": "text",
      "id": "location_5_phone",
      "label": "Phone number"
    },
    {
      "type": "html",
      "id": "location_5_map_embed",
      "label": "Google Maps embed code"
    },
    {
      "type": "header",
      "content": "Location 6"
    },
    {
      "type": "checkbox",
      "id": "location_6_enabled",
      "label": "Enable location 6",
      "default": false
    },
    {
      "type": "text",
      "id": "location_6_title",
      "label": "Title"
    },
    {
      "type": "textarea",
      "id": "location_6_description",
      "label": "Description"
    },
    {
      "type": "text",
      "id": "location_6_phone",
      "label": "Phone number"
    },
    {
      "type": "html",
      "id": "location_6_map_embed",
      "label": "Google Maps embed code"
    },
    {
      "type": "header",
      "content": "Location 7"
    },
    {
      "type": "checkbox",
      "id": "location_7_enabled",
      "label": "Enable location 7",
      "default": false
    },
    {
      "type": "text",
      "id": "location_7_title",
      "label": "Title"
    },
    {
      "type": "textarea",
      "id": "location_7_description",
      "label": "Description"
    },
    {
      "type": "text",
      "id": "location_7_phone",
      "label": "Phone number"
    },
    {
      "type": "html",
      "id": "location_7_map_embed",
      "label": "Google Maps embed code"
    },
    {
      "type": "header",
      "content": "Location 8"
    },
    {
      "type": "checkbox",
      "id": "location_8_enabled",
      "label": "Enable location 8",
      "default": false
    },
    {
      "type": "text",
      "id": "location_8_title",
      "label": "Title"
    },
    {
      "type": "textarea",
      "id": "location_8_description",
      "label": "Description"
    },
    {
      "type": "text",
      "id": "location_8_phone",
      "label": "Phone number"
    },
    {
      "type": "html",
      "id": "location_8_map_embed",
      "label": "Google Maps embed code"
    },
    {
      "type": "header",
      "content": "Location 9"
    },
    {
      "type": "checkbox",
      "id": "location_9_enabled",
      "label": "Enable location 9",
      "default": false
    },
    {
      "type": "text",
      "id": "location_9_title",
      "label": "Title"
    },
    {
      "type": "textarea",
      "id": "location_9_description",
      "label": "Description"
    },
    {
      "type": "text",
      "id": "location_9_phone",
      "label": "Phone number"
    },
    {
      "type": "html",
      "id": "location_9_map_embed",
      "label": "Google Maps embed code"
    },
    {
      "type": "header",
      "content": "Location 10"
    },
    {
      "type": "checkbox",
      "id": "location_10_enabled",
      "label": "Enable location 10",
      "default": false
    },
    {
      "type": "text",
      "id": "location_10_title",
      "label": "Title"
    },
    {
      "type": "textarea",
      "id": "location_10_description",
      "label": "Description"
    },
    {
      "type": "text",
      "id": "location_10_phone",
      "label": "Phone number"
    },
    {
      "type": "html",
      "id": "location_10_map_embed",
      "label": "Google Maps embed code"
    },
    {
      "type": "header",
      "content": "Location 11"
    },
    {
      "type": "checkbox",
      "id": "location_11_enabled",
      "label": "Enable location 11",
      "default": false
    },
    {
      "type": "text",
      "id": "location_11_title",
      "label": "Title"
    },
    {
      "type": "textarea",
      "id": "location_11_description",
      "label": "Description"
    },
    {
      "type": "text",
      "id": "location_11_phone",
      "label": "Phone number"
    },
    {
      "type": "html",
      "id": "location_11_map_embed",
      "label": "Google Maps embed code"
    },
    {
      "type": "header",
      "content": "Location 12"
    },
    {
      "type": "checkbox",
      "id": "location_12_enabled",
      "label": "Enable location 12",
      "default": false
    },
    {
      "type": "text",
      "id": "location_12_title",
      "label": "Title"
    },
    {
      "type": "textarea",
      "id": "location_12_description",
      "label": "Description"
    },
    {
      "type": "text",
      "id": "location_12_phone",
      "label": "Phone number"
    },
    {
      "type": "html",
      "id": "location_12_map_embed",
      "label": "Google Maps embed code"
    }
  ],
  "presets": [
    {
      "name": "Store locations"
    }
  ]
}
{% endschema %}
